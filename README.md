# SVYDLEDGER - Sistema de Contabilidad Universal

## ?? Arquitectura Global

Sistema de contabilidad universal basado en microservicios desplegado en Microsoft Azure.

### ?? Configuración de Región
- **Región Principal**: Central US (centralus)
- **Entornos**: dev, stage, prod (todos en Central US)

### ??? Arquitectura

```
???????????????????????????????????????????????????????????????
?                    Azure API Management                      ?
?                    (API Gateway - Central US)                ?
???????????????????????????????????????????????????????????????
                     ?
         ???????????????????????????????????????????????????????
         ?                       ?              ?              ?
    ????????????          ????????????    ???????????   ???????????
    ? Identity ?          ? Language ?    ? Country ?   ?Accounting?
    ? Service  ?          ? Service  ?    ? Service ?   ? Service  ?
    ????????????          ????????????    ???????????   ???????????
         ?                       ?              ?              ?
    ????????????          ????????????    ???????????   ???????????
    ? Reports  ?          ? Payments ?    ?   ...   ?   ?   ...   ?
    ? Service  ?          ? Service  ?    ?         ?   ?         ?
    ????????????          ????????????    ???????????   ???????????
         ?                       ?              ?              ?
         ???????????????????????????????????????????????????????
                     ?
            ????????????????????
            ?  Azure Service   ?
            ?      Bus         ?
            ?  (Event-Driven)  ?
            ????????????????????
                     ?
            ????????????????????
            ?   Azure SQL      ?
            ?   Hyperscale     ?
            ?  (Central US)    ?
            ????????????????????
```

### ?? Stack Tecnológico

#### Backend
- **Python**: FastAPI, Pydantic
- **Node.js**: TypeScript, Express.js
- **Autenticación**: JWT + OAuth 2.0
- **Seguridad**: Azure Key Vault
- **Pagos**: Stripe Billing

#### Frontend
- **Framework**: React 18 + TypeScript
- **Estado**: Redux Toolkit
- **UI**: Material-UI (MUI) + Ant Design
- **Estilos**: Sass/SCSS + Tailwind CSS
- **Build**: Vite

#### Base de Datos
- **Azure SQL Hyperscale** (Central US)
- **ORM**: Prisma (TypeScript)
- **Patrón**: Database per Service

#### Infraestructura
- **Cloud**: Microsoft Azure (Central US)
- **Contenedores**: Docker
- **Orquestación**: Azure Kubernetes Service (AKS)
- **Registro**: Azure Container Registry (ACR)
- **IaC**: Terraform
- **CI/CD**: GitHub Actions
- **Mensajería**: Azure Service Bus

#### Monitoreo & Seguridad
- **SSL/TLS**: Certificados automatizados
- **Cifrado**: En reposo (Azure SQL)
- **Monitoreo**: Prometheus + Grafana
- **Logs**: ELK Stack (Elasticsearch, Logstash, Kibana)
- **Auditoría**: Automatizada

### ??? Estructura del Proyecto

```
SVYDLEDGER/
??? backend/                     # Microservicios Backend
?   ??? identity-service/        # Servicio de Identidad (Python/FastAPI)
?   ??? language-service/        # Servicio de Idiomas (Python/FastAPI)
?   ??? country-service/         # Servicio de Países (Python/FastAPI)
?   ??? accounting-service/      # Servicio de Contabilidad (Node.js/TypeScript)
?   ??? reports-service/         # Servicio de Reportes (Node.js/TypeScript)
?   ??? payments-service/        # Servicio de Pagos (Node.js/TypeScript)
?   ??? shared/                  # Código compartido
?       ??? utils/
?       ??? middleware/
?       ??? types/
??? frontend/                    # Aplicación Web React
?   ??? public/
?   ??? src/
?   ?   ??? components/
?   ?   ??? features/
?   ?   ??? store/              # Redux Toolkit
?   ?   ??? services/           # API clients
?   ?   ??? styles/             # SCSS/CSS
?   ?   ??? App.tsx
?   ??? package.json
?   ??? vite.config.ts
??? infrastructure/              # Infraestructura como Código
?   ??? terraform/              # Terraform IaC
?   ?   ??? modules/
?   ?   ?   ??? aks/
?   ?   ?   ??? sql/
?   ?   ?   ??? acr/
?   ?   ?   ??? keyvault/
?   ?   ?   ??? service-bus/
?   ?   ?   ??? api-management/
?   ?   ??? environments/
?   ?   ?   ??? dev/
?   ?   ?   ??? stage/
?   ?   ?   ??? prod/
?   ?   ??? main.tf
?   ?   ??? variables.tf
?   ?   ??? outputs.tf
?   ??? kubernetes/             # Manifiestos K8s
?   ?   ??? base/
?   ?   ??? overlays/
?   ?   ??? services/
?   ??? scripts/
?       ??? setup-azure.ps1
?       ??? setup-github-secrets.ps1
??? .github/                    # GitHub Actions
?   ??? workflows/
?       ??? ci-backend.yml
?       ??? ci-frontend.yml
?       ??? cd-dev.yml
?       ??? cd-stage.yml
?       ??? cd-prod.yml
??? docker/                     # Dockerfiles
?   ??? backend/
?   ??? frontend/
??? docs/                       # Documentación
?   ??? architecture/
?   ??? api/
?   ??? deployment/
??? monitoring/                 # Configuración de Monitoreo
?   ??? prometheus/
?   ??? grafana/
?   ??? elk/
??? .gitignore
??? .dockerignore
??? docker-compose.yml          # Para desarrollo local
??? README.md
```

### ?? Recursos Azure (Grupo: svydledger-data)

- **Región**: Central US
- **Dominio**: svydledger.com
- **SQL Server**: svydserver
- **Base de Datos**: svydledger-hyperescala (Azure SQL Hyperscale)
- **Storage**: svydledgerstore
- **DNS**: svydledger.com

### ?? Microservicios

1. **Identity Service** - Gestión de usuarios, roles, autenticación OAuth 2.0
2. **Language Service** - Traducciones y gestión de idiomas
3. **Country Service** - Sistemas tributarios por país
4. **Accounting Service** - Cuentas contables (Activos, Pasivos, Ingresos, etc.)
5. **Reports Service** - Estados Financieros y reportes
6. **Payments Service** - Integración con Stripe Billing

### ?? Despliegue

Todos los servicios se despliegan en **Central US** usando:
- **AKS (Azure Kubernetes Service)** para orquestación
- **ACR (Azure Container Registry)** para imágenes Docker
- **GitHub Actions** para CI/CD automatizado
- **Terraform** para infraestructura reproducible

### ?? URL de Producción

**https://www.svydledger.com**

### ?? Seguridad

- JWT + OAuth 2.0
- Azure Key Vault para secretos
- SSL/TLS en todas las comunicaciones
- Cifrado en reposo (Azure SQL)
- Auditorías automatizadas
- GDPR y CCPA compliant

### ?? Repositorio

**GitHub**: VICTORsvydledger/SVYDLEDGER

---

## ?? Notas Importantes

- **Región parametrizada**: Central US en toda la infraestructura
- **Base de datos por servicio**: Cada microservicio tiene su esquema
- **Sin JOINs entre servicios**: Comunicación vía eventos (Azure Service Bus)
- **Terraform**: Toda la infraestructura está versionada
- **Monitoreo completo**: Prometheus, Grafana, ELK Stack

---

**Versión**: 1.0.0  
**Última actualización**: 2025
